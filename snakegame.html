<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Snake Game</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <style>
    body {
      background: black;
      margin: 0;
      padding: 0;
      color: white;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
    }

    #score {
      font-size: 2rem;
      font-weight: 900;
      text-align: center;
      margin: 1rem 0;
      color: gold;
      text-shadow: 0 0 10px goldenrod, 0 0 20px orange;
    }

    #game {
      width: 90%;
      max-width: 600px;
      aspect-ratio: 1 / 1;
      background: #24242D;
      box-shadow: inset 4px 4px 8px #444, inset -4px -4px 8px #4B4545;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }

    .snake {
      width: 3%;
      height: 3%;
      background: #A0791D;
      border: solid 2px #D9B867;
      border-radius: 4px;
      position: absolute;
    }

    .apple {
      width: 3%;
      height: 3%;
      background: red;
      border-radius: 50%;
      position: absolute;
      box-shadow: 0 0 8px rgba(255,0,0,0.8);
    }

    #nav {
      margin-top: 2rem;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    ol {
      display: grid;
      grid-template-areas:
        ". up ."
        "left down right";
      grid-gap: 1rem;
      list-style: none;
      padding: 0;
      margin: 0;
    }

    li {
      border: solid 2px #D9B867;
      background: #A0791D;
      width: 100px;     /* bigger */
      height: 100px;    /* bigger */
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 15px;
      font-weight: 900;
      cursor: pointer;
      user-select: none;
      font-size: 2.5rem; /* bigger arrow text */
      transition: all 0.2s;
    }

    li:active {
      transform: scale(0.9);
      background: #D5A021;
    }

    #arrowUp { grid-area: up; }
    #arrowDown { grid-area: down; }
    #arrowLeft { grid-area: left; }
    #arrowRight { grid-area: right; }

    #power {
      margin-top: 2rem;
      padding: 1rem 2rem;
      font-weight: 800;
      font-size: 1.2rem;
      background: linear-gradient(90deg, goldenrod, #ffcc33);
      color: black;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 0 15px gold;
    }

    #power:hover {
      box-shadow: 0 0 25px gold, 0 0 50px orange;
    }

    #ani1-container1 {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: clamp(2rem, 6vw, 4rem);
      font-weight: bolder;
      opacity: 0;
      color: #D5A021;
      text-shadow: 0 0 20px #D5A021, 0 0 40px orange;
      text-align: center;
    }

    @media (max-width: 600px) {
      li {
        width: 80px;
        height: 80px;
        font-size: 2rem;
      }
      #power {
        width: 90%;
        font-size: 1rem;
        padding: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <div id="score">Score: 0</div>

  <section id="game">
    <div id="ani1-container1"><div id="ani11">POWER ON</div></div>
  </section>

  <section id="nav">
    <ol>
      <li id="arrowUp">↑</li>
      <li id="arrowLeft">←</li>
      <li id="arrowDown">↓</li>
      <li id="arrowRight">→</li>
    </ol>
  </section>

  <button id="power">POWER ON</button>

  <script>
    let powerBtn = document.querySelector("#power");
    let ani1Container = document.querySelector("#ani1-container1");
    let ani1= document.querySelector("#ani11");
    let scoreDisplay = document.getElementById("score");
    let game = document.getElementById("game");

    const box=20;
    let rows, cols;
    function calcGrid(){
      rows=Math.floor(game.clientHeight/box);
      cols=Math.floor(game.clientWidth/box);
    }
    window.addEventListener("resize",calcGrid);
    calcGrid();

    let snake=[{x:5,y:5}];
    let direction={x:1,y:0};
    let apple=randomApple();
    let score=0;
    let gameInterval;
    let isRunning=false;
    let speed=150;

    function drawSnake(){
      document.querySelectorAll(".snake").forEach(el=>el.remove());
      snake.forEach((seg,i)=>{
        const div=document.createElement("div");
        div.className="snake";
        div.style.left=(seg.x/cols*100)+"%";
        div.style.top=(seg.y/rows*100)+"%";
        game.appendChild(div);
        gsap.fromTo(div,{scale:0.8,opacity:0.7},{scale:1,opacity:1,duration:0.2,delay:i*0.02});
      });
    }

    function drawApple(){
      document.querySelectorAll(".apple").forEach(el=>el.remove());
      const div=document.createElement("div");
      div.className="apple";
      div.style.left=(apple.x/cols*100)+"%";
      div.style.top=(apple.y/rows*100)+"%";
      game.appendChild(div);
      gsap.fromTo(div,{scale:0,opacity:0},{scale:1.3,opacity:1,duration:0.4,ease:"back.out(2)"});
      gsap.to(div,{scale:1.2,boxShadow:"0 0 20px rgba(255,0,0,1)",duration:0.8,yoyo:true,repeat:-1,ease:"sine.inOut",delay:0.4});
    }

    function randomApple(){
      let pos;
      do{
        pos={x:Math.floor(Math.random()*cols),y:Math.floor(Math.random()*rows)};
      }while(snake.some(seg=>seg.x===pos.x && seg.y===pos.y));
      return pos;
    }

    function update(){
      const head={x:(snake[0].x+direction.x+cols)%cols,y:(snake[0].y+direction.y+rows)%rows};
      if(snake.some((seg,i)=>i>0&&seg.x===head.x&&seg.y===head.y)){gameOver();return;}
      snake.unshift(head);

      if(head.x===apple.x && head.y===apple.y){
        score++;
        scoreDisplay.textContent="Score: "+score;
        gsap.fromTo(scoreDisplay,{scale:1.2,color:"orange"},{scale:1,color:"gold",duration:0.5,ease:"bounce"});
        apple=randomApple();
        if(score % 5 === 0 && speed > 50){
          speed -= 15;
          restartInterval();
        }
      }else{
        snake.pop();
      }
      drawSnake();drawApple();
    }

    function restartInterval(){
      clearInterval(gameInterval);
      gameInterval=setInterval(update,speed);
    }

    function gameOver(){
      clearInterval(gameInterval);
      isRunning=false;
      ani1.textContent="GAME OVER";
      gsap.fromTo(ani1Container,{opacity:0,scale:0},{opacity:1,scale:2,duration:1,ease:"bounce",yoyo:true,repeat:1,onComplete:()=>{ani1Container.style.opacity=0;}});
    }

    function resetGame(){
      snake=[{x:5,y:5}];
      direction={x:1,y:0};
      apple=randomApple();
      score=0;
      speed=150;
      scoreDisplay.textContent="Score: 0";
      drawSnake();drawApple();
    }

    document.addEventListener("keydown",e=>{
      if(e.key==="ArrowUp"&&direction.y!==1)direction={x:0,y:-1};
      if(e.key==="ArrowDown"&&direction.y!==-1)direction={x:0,y:1};
      if(e.key==="ArrowLeft"&&direction.x!==1)direction={x:-1,y:0};
      if(e.key==="ArrowRight"&&direction.x!==-1)direction={x:1,y:0};
    });

    document.getElementById("arrowUp").onclick=()=>{if(direction.y!==1)direction={x:0,y:-1}};
    document.getElementById("arrowDown").onclick=()=>{if(direction.y!==-1)direction={x:0,y:1}};
    document.getElementById("arrowLeft").onclick=()=>{if(direction.x!==1)direction={x:-1,y:0}};
    document.getElementById("arrowRight").onclick=()=>{if(direction.x!==-1)direction={x:1,y:0}};

    powerBtn.addEventListener("click",()=>{
      if(isRunning){
        clearInterval(gameInterval);
        powerBtn.textContent="POWER ON";
        isRunning=false;
        ani1.textContent="PAUSED";
        gsap.fromTo(ani1Container,{opacity:0,scale:0},{opacity:1,scale:1.5,duration:0.8,yoyo:true,repeat:1,onComplete:()=>{ani1Container.style.opacity=0;}});
      }else{
        resetGame();
        restartInterval();
        powerBtn.textContent="POWER OFF";
        isRunning=true;
        ani1.textContent="POWER ON";
        gsap.fromTo(ani1Container,{opacity:0,scale:0},{opacity:1,scale:1.5,duration:0.8,yoyo:true,repeat:1,onComplete:()=>{ani1Container.style.opacity=0;}});
      }
    });
  </script>
</body>
</html>
